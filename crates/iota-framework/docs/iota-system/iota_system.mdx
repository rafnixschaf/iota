---
title: Module `0x3::iota_system`
---
import Link from '@docusaurus/Link';

<Link id="0x3_iota_system"/>
Iota System State Type Upgrade Guide
<code>
<Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link></code> is a thin wrapper around <code>
IotaSystemStateInner</code> that provides a versioned interface.
The <code>
<Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link></code> object has a fixed ID 0x5, and the <code>
IotaSystemStateInner</code> object is stored as a dynamic field.
There are a few different ways to upgrade the <code>
IotaSystemStateInner</code> type:

The simplest and one that doesn't involve a real upgrade is to just add dynamic fields to the <code>
extra_fields</code> field
of <code>
IotaSystemStateInner</code> or any of its sub type. This is useful when we are in a rush, or making a small change,
or still experimenting a new field.

To properly upgrade the <code>
IotaSystemStateInner</code> type, we need to ship a new framework that does the following:
1. Define a new <code>
IotaSystemStateInner</code>type (e.g. <code>
IotaSystemStateInnerV2</code>).
2. Define a data migration function that migrates the old <code>
IotaSystemStateInner</code> to the new one (i.e. IotaSystemStateInnerV2).
3. Replace all uses of <code>
IotaSystemStateInner</code> with <code>
IotaSystemStateInnerV2</code> in both iota_system.move and iota_system_state_inner.move,
with the exception of the <code>
<Link to="iota_system_state_inner#0x3_iota_system_state_inner_create">iota_system_state_inner::create</Link></code> function, which should always return the genesis type.
4. Inside <code>
load_inner_maybe_upgrade</code> function, check the current version in the wrapper, and if it's not the latest version,
call the data migration function to upgrade the inner object. Make sure to also update the version in the wrapper.
A detailed example can be found in iota/tests/framework_upgrades/mock_iota_systems/shallow_upgrade.
Along with the Move change, we also need to update the Rust code to support the new type. This includes:
1. Define a new <code>
IotaSystemStateInner</code> struct type that matches the new Move type, and implement the IotaSystemStateTrait.
2. Update the <code>
<Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link></code> struct to include the new version as a new enum variant.
3. Update the <code>
get_iota_system_state</code> function to handle the new version.
To test that the upgrade will be successful, we need to modify <code>
iota_system_state_production_upgrade_test</code> test in
protocol_version_tests and trigger a real upgrade using the new framework. We will need to keep this directory as old version,
put the new framework in a new directory, and run the test to exercise the upgrade.

To upgrade Validator type, besides everything above, we also need to:
1. Define a new Validator type (e.g. ValidatorV2).
2. Define a data migration function that migrates the old Validator to the new one (i.e. ValidatorV2).
3. Replace all uses of Validator with ValidatorV2 except the genesis creation function.
4. In validator_wrapper::upgrade_to_latest, check the current version in the wrapper, and if it's not the latest version,
call the data migration function to upgrade it.
In Rust, we also need to add a new case in <code>
get_validator_from_table</code>.
Note that it is possible to upgrade IotaSystemStateInner without upgrading Validator, but not the other way around.
And when we only upgrade IotaSystemStateInner, the version of Validator in the wrapper will not be updated, and hence may become
inconsistent with the version of IotaSystemStateInner. This is fine as long as we don't use the Validator version to determine
the IotaSystemStateInner version, or vice versa.


-  [Resource `IotaSystemState`](#0x3_iota_system_IotaSystemState)
-  [Constants](#@Constants_0)
-  [Function `create`](#0x3_iota_system_create)
-  [Function `request_add_validator_candidate`](#0x3_iota_system_request_add_validator_candidate)
-  [Function `request_remove_validator_candidate`](#0x3_iota_system_request_remove_validator_candidate)
-  [Function `request_add_validator`](#0x3_iota_system_request_add_validator)
-  [Function `request_remove_validator`](#0x3_iota_system_request_remove_validator)
-  [Function `request_set_gas_price`](#0x3_iota_system_request_set_gas_price)
-  [Function `set_candidate_validator_gas_price`](#0x3_iota_system_set_candidate_validator_gas_price)
-  [Function `request_set_commission_rate`](#0x3_iota_system_request_set_commission_rate)
-  [Function `set_candidate_validator_commission_rate`](#0x3_iota_system_set_candidate_validator_commission_rate)
-  [Function `request_add_stake`](#0x3_iota_system_request_add_stake)
-  [Function `request_add_stake_non_entry`](#0x3_iota_system_request_add_stake_non_entry)
-  [Function `request_add_stake_mul_coin`](#0x3_iota_system_request_add_stake_mul_coin)
-  [Function `request_withdraw_stake`](#0x3_iota_system_request_withdraw_stake)
-  [Function `request_withdraw_stake_non_entry`](#0x3_iota_system_request_withdraw_stake_non_entry)
-  [Function `report_validator`](#0x3_iota_system_report_validator)
-  [Function `undo_report_validator`](#0x3_iota_system_undo_report_validator)
-  [Function `rotate_operation_cap`](#0x3_iota_system_rotate_operation_cap)
-  [Function `update_validator_name`](#0x3_iota_system_update_validator_name)
-  [Function `update_validator_description`](#0x3_iota_system_update_validator_description)
-  [Function `update_validator_image_url`](#0x3_iota_system_update_validator_image_url)
-  [Function `update_validator_project_url`](#0x3_iota_system_update_validator_project_url)
-  [Function `update_validator_next_epoch_network_address`](#0x3_iota_system_update_validator_next_epoch_network_address)
-  [Function `update_candidate_validator_network_address`](#0x3_iota_system_update_candidate_validator_network_address)
-  [Function `update_validator_next_epoch_p2p_address`](#0x3_iota_system_update_validator_next_epoch_p2p_address)
-  [Function `update_candidate_validator_p2p_address`](#0x3_iota_system_update_candidate_validator_p2p_address)
-  [Function `update_validator_next_epoch_primary_address`](#0x3_iota_system_update_validator_next_epoch_primary_address)
-  [Function `update_candidate_validator_primary_address`](#0x3_iota_system_update_candidate_validator_primary_address)
-  [Function `update_validator_next_epoch_worker_address`](#0x3_iota_system_update_validator_next_epoch_worker_address)
-  [Function `update_candidate_validator_worker_address`](#0x3_iota_system_update_candidate_validator_worker_address)
-  [Function `update_validator_next_epoch_protocol_pubkey`](#0x3_iota_system_update_validator_next_epoch_protocol_pubkey)
-  [Function `update_candidate_validator_protocol_pubkey`](#0x3_iota_system_update_candidate_validator_protocol_pubkey)
-  [Function `update_validator_next_epoch_worker_pubkey`](#0x3_iota_system_update_validator_next_epoch_worker_pubkey)
-  [Function `update_candidate_validator_worker_pubkey`](#0x3_iota_system_update_candidate_validator_worker_pubkey)
-  [Function `update_validator_next_epoch_network_pubkey`](#0x3_iota_system_update_validator_next_epoch_network_pubkey)
-  [Function `update_candidate_validator_network_pubkey`](#0x3_iota_system_update_candidate_validator_network_pubkey)
-  [Function `pool_exchange_rates`](#0x3_iota_system_pool_exchange_rates)
-  [Function `active_validator_addresses`](#0x3_iota_system_active_validator_addresses)
-  [Function `advance_epoch`](#0x3_iota_system_advance_epoch)
-  [Function `load_system_state`](#0x3_iota_system_load_system_state)
-  [Function `load_system_state_mut`](#0x3_iota_system_load_system_state_mut)
-  [Function `load_inner_maybe_upgrade`](#0x3_iota_system_load_inner_maybe_upgrade)
-  [Function `load_system_timelock_cap`](#0x3_iota_system_load_system_timelock_cap)
-  [Function `get_total_iota_supply`](#0x3_iota_system_get_total_iota_supply)


<pre><code>
<b>use</b> <Link to="../move-stdlib/option#0x1_option">0x1::option</Link>;
<b>use</b> <Link to="../iota-framework/balance#0x2_balance">0x2::balance</Link>;
<b>use</b> <Link to="../iota-framework/coin#0x2_coin">0x2::coin</Link>;
<b>use</b> <Link to="../iota-framework/dynamic_field#0x2_dynamic_field">0x2::dynamic_field</Link>;
<b>use</b> <Link to="../iota-framework/iota#0x2_iota">0x2::iota</Link>;
<b>use</b> <Link to="../iota-framework/object#0x2_object">0x2::object</Link>;
<b>use</b> <Link to="../iota-framework/table#0x2_table">0x2::table</Link>;
<b>use</b> <Link to="../iota-framework/timelock#0x2_timelock">0x2::timelock</Link>;
<b>use</b> <Link to="../iota-framework/transfer#0x2_transfer">0x2::transfer</Link>;
<b>use</b> <Link to="../iota-framework/tx_context#0x2_tx_context">0x2::tx_context</Link>;
<b>use</b> <Link to="iota_system_state_inner#0x3_iota_system_state_inner">0x3::iota_system_state_inner</Link>;
<b>use</b> <Link to="staking_pool#0x3_staking_pool">0x3::staking_pool</Link>;
<b>use</b> <Link to="validator#0x3_validator">0x3::validator</Link>;
<b>use</b> <Link to="validator_cap#0x3_validator_cap">0x3::validator_cap</Link>;
</code></pre>



<Link id="0x3_iota_system_IotaSystemState"></Link>

## Resource `IotaSystemState`



<pre><code>
<b>struct</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link> <b>has</b> key
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
id: <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link></code>
</dt>
<dd>

</dd>
<dt>
<code>
version: u64</code>
</dt>
<dd>

</dd>
</dl>


</details>

<Link id="@Constants_0"></Link>

## Constants


<Link id="0x3_iota_system_ENotSystemAddress"></Link>



<pre><code>
<b>const</b> <Link to="iota_system#0x3_iota_system_ENotSystemAddress">ENotSystemAddress</Link>: u64 = 0;
</code></pre>



<Link id="0x3_iota_system_EWrongInnerVersion"></Link>



<pre><code>
<b>const</b> <Link to="iota_system#0x3_iota_system_EWrongInnerVersion">EWrongInnerVersion</Link>: u64 = 1;
</code></pre>



<Link id="0x3_iota_system_SYSTEM_TIMELOCK_CAP_DF_KEY"></Link>



<pre><code>
<b>const</b> <Link to="iota_system#0x3_iota_system_SYSTEM_TIMELOCK_CAP_DF_KEY">SYSTEM_TIMELOCK_CAP_DF_KEY</Link>: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt; = [115, 121, 115, 95, 116, 105, 109, 101, 108, 111, 99, 107, 95, 99, 97, 112];
</code></pre>



<Link id="0x3_iota_system_create"></Link>

## Function `create`

Create a new IotaSystemState object and make it shared.
This function will be called only once in genesis.


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="iota_system#0x3_iota_system_create">create</Link>(id: <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, iota_treasury_cap: <Link to="../iota-framework/iota#0x2_iota_IotaTreasuryCap">iota::IotaTreasuryCap</Link>, validators: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;<Link to="validator#0x3_validator_Validator">validator::Validator</Link>&gt;, <Link to="storage_fund#0x3_storage_fund">storage_fund</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, protocol_version: u64, epoch_start_timestamp_ms: u64, parameters: <Link to="iota_system_state_inner#0x3_iota_system_state_inner_SystemParameters">iota_system_state_inner::SystemParameters</Link>, system_timelock_cap: <Link to="../iota-framework/timelock#0x2_timelock_SystemTimelockCap">timelock::SystemTimelockCap</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="iota_system#0x3_iota_system_create">create</Link>(
    id: UID,
    iota_treasury_cap: IotaTreasuryCap,
    validators: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;Validator&gt;,
    <Link to="storage_fund#0x3_storage_fund">storage_fund</Link>: Balance&lt;IOTA&gt;,
    protocol_version: u64,
    epoch_start_timestamp_ms: u64,
    parameters: SystemParameters,
    system_timelock_cap: SystemTimelockCap,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> system_state = <Link to="iota_system_state_inner#0x3_iota_system_state_inner_create">iota_system_state_inner::create</Link>(
        iota_treasury_cap,
        validators,
        <Link to="storage_fund#0x3_storage_fund">storage_fund</Link>,
        protocol_version,
        epoch_start_timestamp_ms,
        parameters,
        ctx,
    );
    <b>let</b> version = <Link to="iota_system_state_inner#0x3_iota_system_state_inner_genesis_system_state_version">iota_system_state_inner::genesis_system_state_version</Link>();
    <b>let</b> <b>mut</b> self = <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link> \{
        id,
        version,
    };
    <Link to="../iota-framework/dynamic_field#0x2_dynamic_field_add">dynamic_field::add</Link>(&<b>mut</b> self.id, version, system_state);
    <Link to="../iota-framework/dynamic_field#0x2_dynamic_field_add">dynamic_field::add</Link>(&<b>mut</b> self.id, <Link to="iota_system#0x3_iota_system_SYSTEM_TIMELOCK_CAP_DF_KEY">SYSTEM_TIMELOCK_CAP_DF_KEY</Link>, system_timelock_cap);
    <Link to="../iota-framework/transfer#0x2_transfer_share_object">transfer::share_object</Link>(self);
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_add_validator_candidate"></Link>

## Function `request_add_validator_candidate`

Can be called by anyone who wishes to become a validator candidate and starts accuring delegated
stakes in their staking pool. Once they have at least <code>
MIN_VALIDATOR_JOINING_STAKE</code> amount of stake they
can call <code>
request_add_validator</code> to officially become an active validator at the next epoch.
Aborts if the caller is already a pending or active validator, or a validator candidate.
Note: <code>
proof_of_possession</code> MUST be a valid signature using iota_address and protocol_pubkey_bytes.
To produce a valid PoP, run [fn test_proof_of_possession].


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_validator_candidate">request_add_validator_candidate</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, gas_price: u64, commission_rate: u64, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_validator_candidate">request_add_validator_candidate</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    network_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    worker_pubkey_bytes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    net_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    gas_price: u64,
    commission_rate: u64,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_add_validator_candidate">request_add_validator_candidate</Link>(
        pubkey_bytes,
        network_pubkey_bytes,
        worker_pubkey_bytes,
        proof_of_possession,
        name,
        description,
        image_url,
        project_url,
        net_address,
        p2p_address,
        primary_address,
        worker_address,
        gas_price,
        commission_rate,
        ctx,
    )
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_remove_validator_candidate"></Link>

## Function `request_remove_validator_candidate`

Called by a validator candidate to remove themselves from the candidacy. After this call
their staking pool becomes deactivate.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_remove_validator_candidate">request_remove_validator_candidate</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_remove_validator_candidate">request_remove_validator_candidate</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_remove_validator_candidate">request_remove_validator_candidate</Link>(ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_add_validator"></Link>

## Function `request_add_validator`

Called by a validator candidate to add themselves to the active validator set beginning next epoch.
Aborts if the validator is a duplicate with one of the pending or active validators, or if the amount of
stake the validator has doesn't meet the min threshold, or if the number of new validators for the next
epoch has already reached the maximum.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_validator">request_add_validator</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_validator">request_add_validator</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_add_validator">request_add_validator</Link>(ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_remove_validator"></Link>

## Function `request_remove_validator`

A validator can call this function to request a removal in the next epoch.
We use the sender of <code>
ctx</code> to look up the validator
(i.e. sender must match the iota_address in the validator).
At the end of the epoch, the <code>
<Link to="validator#0x3_validator">validator</Link></code> object will be returned to the iota_address
of the validator.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_remove_validator">request_remove_validator</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_remove_validator">request_remove_validator</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_remove_validator">request_remove_validator</Link>(ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_set_gas_price"></Link>

## Function `request_set_gas_price`

A validator can call this entry function to submit a new gas price quote, to be
used for the reference gas price calculation at the end of the epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_set_gas_price">request_set_gas_price</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, cap: &<Link to="validator_cap#0x3_validator_cap_UnverifiedValidatorOperationCap">validator_cap::UnverifiedValidatorOperationCap</Link>, new_gas_price: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_set_gas_price">request_set_gas_price</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    cap: &UnverifiedValidatorOperationCap,
    new_gas_price: u64,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_set_gas_price">request_set_gas_price</Link>(cap, new_gas_price)
}
</code></pre>



</details>

<Link id="0x3_iota_system_set_candidate_validator_gas_price"></Link>

## Function `set_candidate_validator_gas_price`

This entry function is used to set new gas price for candidate validators


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_set_candidate_validator_gas_price">set_candidate_validator_gas_price</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, cap: &<Link to="validator_cap#0x3_validator_cap_UnverifiedValidatorOperationCap">validator_cap::UnverifiedValidatorOperationCap</Link>, new_gas_price: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_set_candidate_validator_gas_price">set_candidate_validator_gas_price</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    cap: &UnverifiedValidatorOperationCap,
    new_gas_price: u64,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_set_candidate_validator_gas_price">set_candidate_validator_gas_price</Link>(cap, new_gas_price)
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_set_commission_rate"></Link>

## Function `request_set_commission_rate`

A validator can call this entry function to set a new commission rate, updated at the end of
the epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_set_commission_rate">request_set_commission_rate</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, new_commission_rate: u64, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_set_commission_rate">request_set_commission_rate</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    new_commission_rate: u64,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_set_commission_rate">request_set_commission_rate</Link>(new_commission_rate, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_set_candidate_validator_commission_rate"></Link>

## Function `set_candidate_validator_commission_rate`

This entry function is used to set new commission rate for candidate validators


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_set_candidate_validator_commission_rate">set_candidate_validator_commission_rate</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, new_commission_rate: u64, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_set_candidate_validator_commission_rate">set_candidate_validator_commission_rate</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    new_commission_rate: u64,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_set_candidate_validator_commission_rate">set_candidate_validator_commission_rate</Link>(new_commission_rate, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_add_stake"></Link>

## Function `request_add_stake`

Add stake to a validator's staking pool.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_stake">request_add_stake</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, stake: <Link to="../iota-framework/coin#0x2_coin_Coin">coin::Coin</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, validator_address: <b>address</b>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_stake">request_add_stake</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    stake: Coin&lt;IOTA&gt;,
    validator_address: <b>address</b>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> staked_iota = <Link to="iota_system#0x3_iota_system_request_add_stake_non_entry">request_add_stake_non_entry</Link>(wrapper, stake, validator_address, ctx);
    <Link to="../iota-framework/transfer#0x2_transfer_public_transfer">transfer::public_transfer</Link>(staked_iota, ctx.sender());
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_add_stake_non_entry"></Link>

## Function `request_add_stake_non_entry`

The non-entry version of <code>
request_add_stake</code>, which returns the staked IOTA instead of transferring it to the sender.


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_stake_non_entry">request_add_stake_non_entry</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, stake: <Link to="../iota-framework/coin#0x2_coin_Coin">coin::Coin</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, validator_address: <b>address</b>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="staking_pool#0x3_staking_pool_StakedIota">staking_pool::StakedIota</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_stake_non_entry">request_add_stake_non_entry</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    stake: Coin&lt;IOTA&gt;,
    validator_address: <b>address</b>,
    ctx: &<b>mut</b> TxContext,
): StakedIota \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_add_stake">request_add_stake</Link>(stake, validator_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_add_stake_mul_coin"></Link>

## Function `request_add_stake_mul_coin`

Add stake to a validator's staking pool using multiple coins.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_stake_mul_coin">request_add_stake_mul_coin</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, stakes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;<Link to="../iota-framework/coin#0x2_coin_Coin">coin::Coin</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;&gt;, stake_amount: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;u64&gt;, validator_address: <b>address</b>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_add_stake_mul_coin">request_add_stake_mul_coin</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    stakes: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;Coin&lt;IOTA&gt;&gt;,
    stake_amount: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;u64&gt;,
    validator_address: <b>address</b>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    <b>let</b> staked_iota = self.<Link to="iota_system#0x3_iota_system_request_add_stake_mul_coin">request_add_stake_mul_coin</Link>(stakes, stake_amount, validator_address, ctx);
    <Link to="../iota-framework/transfer#0x2_transfer_public_transfer">transfer::public_transfer</Link>(staked_iota, ctx.sender());
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_withdraw_stake"></Link>

## Function `request_withdraw_stake`

Withdraw stake from a validator's staking pool.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_withdraw_stake">request_withdraw_stake</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, staked_iota: <Link to="staking_pool#0x3_staking_pool_StakedIota">staking_pool::StakedIota</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_request_withdraw_stake">request_withdraw_stake</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    staked_iota: StakedIota,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> withdrawn_stake = <Link to="iota_system#0x3_iota_system_request_withdraw_stake_non_entry">request_withdraw_stake_non_entry</Link>(wrapper, staked_iota, ctx);
    <Link to="../iota-framework/transfer#0x2_transfer_public_transfer">transfer::public_transfer</Link>(withdrawn_stake.into_coin(ctx), ctx.sender());
}
</code></pre>



</details>

<Link id="0x3_iota_system_request_withdraw_stake_non_entry"></Link>

## Function `request_withdraw_stake_non_entry`

Non-entry version of <code>
request_withdraw_stake</code> that returns the withdrawn IOTA instead of transferring it to the sender.


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_request_withdraw_stake_non_entry">request_withdraw_stake_non_entry</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, staked_iota: <Link to="staking_pool#0x3_staking_pool_StakedIota">staking_pool::StakedIota</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_request_withdraw_stake_non_entry">request_withdraw_stake_non_entry</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    staked_iota: StakedIota,
    ctx: &<b>mut</b> TxContext,
) : Balance&lt;IOTA&gt; \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_request_withdraw_stake">request_withdraw_stake</Link>(staked_iota, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_report_validator"></Link>

## Function `report_validator`

Report a validator as a bad or non-performant actor in the system.
Succeeds if all the following are satisfied:
1. both the reporter in <code>
cap</code> and the input <code>
reportee_addr</code> are active validators.
2. reporter and reportee not the same address.
3. the cap object is still valid.
This function is idempotent.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_report_validator">report_validator</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, cap: &<Link to="validator_cap#0x3_validator_cap_UnverifiedValidatorOperationCap">validator_cap::UnverifiedValidatorOperationCap</Link>, reportee_addr: <b>address</b>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_report_validator">report_validator</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    cap: &UnverifiedValidatorOperationCap,
    reportee_addr: <b>address</b>,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_report_validator">report_validator</Link>(cap, reportee_addr)
}
</code></pre>



</details>

<Link id="0x3_iota_system_undo_report_validator"></Link>

## Function `undo_report_validator`

Undo a <code>
report_validator</code> action. Aborts if
1. the reportee is not a currently active validator or
2. the sender has not previously reported the <code>
reportee_addr</code>, or
3. the cap is not valid


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_undo_report_validator">undo_report_validator</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, cap: &<Link to="validator_cap#0x3_validator_cap_UnverifiedValidatorOperationCap">validator_cap::UnverifiedValidatorOperationCap</Link>, reportee_addr: <b>address</b>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_undo_report_validator">undo_report_validator</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    cap: &UnverifiedValidatorOperationCap,
    reportee_addr: <b>address</b>,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_undo_report_validator">undo_report_validator</Link>(cap, reportee_addr)
}
</code></pre>



</details>

<Link id="0x3_iota_system_rotate_operation_cap"></Link>

## Function `rotate_operation_cap`

Create a new <code>
UnverifiedValidatorOperationCap</code>, transfer it to the
validator and registers it. The original object is thus revoked.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_rotate_operation_cap">rotate_operation_cap</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_rotate_operation_cap">rotate_operation_cap</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    ctx: &<b>mut</b> TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_rotate_operation_cap">rotate_operation_cap</Link>(ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_name"></Link>

## Function `update_validator_name`

Update a validator's name.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_name">update_validator_name</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_name">update_validator_name</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    name: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_name">update_validator_name</Link>(name, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_description"></Link>

## Function `update_validator_description`

Update a validator's description


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_description">update_validator_description</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_description">update_validator_description</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    description: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_description">update_validator_description</Link>(description, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_image_url"></Link>

## Function `update_validator_image_url`

Update a validator's image url


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_image_url">update_validator_image_url</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_image_url">update_validator_image_url</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    image_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_image_url">update_validator_image_url</Link>(image_url, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_project_url"></Link>

## Function `update_validator_project_url`

Update a validator's project url


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_project_url">update_validator_project_url</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_project_url">update_validator_project_url</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    project_url: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_project_url">update_validator_project_url</Link>(project_url, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_network_address"></Link>

## Function `update_validator_next_epoch_network_address`

Update a validator's network address.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_network_address">update_validator_next_epoch_network_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, network_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_network_address">update_validator_next_epoch_network_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    network_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_network_address">update_validator_next_epoch_network_address</Link>(network_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_network_address"></Link>

## Function `update_candidate_validator_network_address`

Update candidate validator's network address.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_network_address">update_candidate_validator_network_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, network_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_network_address">update_candidate_validator_network_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    network_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_network_address">update_candidate_validator_network_address</Link>(network_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_p2p_address"></Link>

## Function `update_validator_next_epoch_p2p_address`

Update a validator's p2p address.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_p2p_address">update_validator_next_epoch_p2p_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_p2p_address">update_validator_next_epoch_p2p_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_p2p_address">update_validator_next_epoch_p2p_address</Link>(p2p_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_p2p_address"></Link>

## Function `update_candidate_validator_p2p_address`

Update candidate validator's p2p address.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_p2p_address">update_candidate_validator_p2p_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_p2p_address">update_candidate_validator_p2p_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    p2p_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_p2p_address">update_candidate_validator_p2p_address</Link>(p2p_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_primary_address"></Link>

## Function `update_validator_next_epoch_primary_address`

Update a validator's narwhal primary address.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_primary_address">update_validator_next_epoch_primary_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_primary_address">update_validator_next_epoch_primary_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_primary_address">update_validator_next_epoch_primary_address</Link>(primary_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_primary_address"></Link>

## Function `update_candidate_validator_primary_address`

Update candidate validator's narwhal primary address.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_primary_address">update_candidate_validator_primary_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_primary_address">update_candidate_validator_primary_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    primary_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_primary_address">update_candidate_validator_primary_address</Link>(primary_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_worker_address"></Link>

## Function `update_validator_next_epoch_worker_address`

Update a validator's narwhal worker address.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_worker_address">update_validator_next_epoch_worker_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_worker_address">update_validator_next_epoch_worker_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_worker_address">update_validator_next_epoch_worker_address</Link>(worker_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_worker_address"></Link>

## Function `update_candidate_validator_worker_address`

Update candidate validator's narwhal worker address.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_worker_address">update_candidate_validator_worker_address</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_worker_address">update_candidate_validator_worker_address</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    worker_address: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_worker_address">update_candidate_validator_worker_address</Link>(worker_address, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_protocol_pubkey"></Link>

## Function `update_validator_next_epoch_protocol_pubkey`

Update a validator's public key of protocol key and proof of possession.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_protocol_pubkey">update_validator_next_epoch_protocol_pubkey</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_protocol_pubkey">update_validator_next_epoch_protocol_pubkey</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_protocol_pubkey">update_validator_next_epoch_protocol_pubkey</Link>(protocol_pubkey, proof_of_possession, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_protocol_pubkey"></Link>

## Function `update_candidate_validator_protocol_pubkey`

Update candidate validator's public key of protocol key and proof of possession.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_protocol_pubkey">update_candidate_validator_protocol_pubkey</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_protocol_pubkey">update_candidate_validator_protocol_pubkey</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    protocol_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    proof_of_possession: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_protocol_pubkey">update_candidate_validator_protocol_pubkey</Link>(protocol_pubkey, proof_of_possession, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_worker_pubkey"></Link>

## Function `update_validator_next_epoch_worker_pubkey`

Update a validator's public key of worker key.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_worker_pubkey">update_validator_next_epoch_worker_pubkey</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_worker_pubkey">update_validator_next_epoch_worker_pubkey</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_worker_pubkey">update_validator_next_epoch_worker_pubkey</Link>(worker_pubkey, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_worker_pubkey"></Link>

## Function `update_candidate_validator_worker_pubkey`

Update candidate validator's public key of worker key.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_worker_pubkey">update_candidate_validator_worker_pubkey</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_worker_pubkey">update_candidate_validator_worker_pubkey</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    worker_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_worker_pubkey">update_candidate_validator_worker_pubkey</Link>(worker_pubkey, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_validator_next_epoch_network_pubkey"></Link>

## Function `update_validator_next_epoch_network_pubkey`

Update a validator's public key of network key.
The change will only take effects starting from the next epoch.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_network_pubkey">update_validator_next_epoch_network_pubkey</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_validator_next_epoch_network_pubkey">update_validator_next_epoch_network_pubkey</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_validator_next_epoch_network_pubkey">update_validator_next_epoch_network_pubkey</Link>(network_pubkey, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_update_candidate_validator_network_pubkey"></Link>

## Function `update_candidate_validator_network_pubkey`

Update candidate validator's public key of network key.


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_network_pubkey">update_candidate_validator_network_pubkey</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;, ctx: &<Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> entry <b>fun</b> <Link to="iota_system#0x3_iota_system_update_candidate_validator_network_pubkey">update_candidate_validator_network_pubkey</Link>(
    self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    network_pubkey: <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;,
    ctx: &TxContext,
) \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self);
    self.<Link to="iota_system#0x3_iota_system_update_candidate_validator_network_pubkey">update_candidate_validator_network_pubkey</Link>(network_pubkey, ctx)
}
</code></pre>



</details>

<Link id="0x3_iota_system_pool_exchange_rates"></Link>

## Function `pool_exchange_rates`

Getter of the pool token exchange rate of a staking pool. Works for both active and inactive pools.


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_pool_exchange_rates">pool_exchange_rates</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, pool_id: &<Link to="../iota-framework/object#0x2_object_ID">object::ID</Link>): &<Link to="../iota-framework/table#0x2_table_Table">table::Table</Link>&lt;u64, <Link to="staking_pool#0x3_staking_pool_PoolTokenExchangeRate">staking_pool::PoolTokenExchangeRate</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_pool_exchange_rates">pool_exchange_rates</Link>(
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    pool_id: &ID
): &Table&lt;u64, PoolTokenExchangeRate&gt;  \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_pool_exchange_rates">pool_exchange_rates</Link>(pool_id)
}
</code></pre>



</details>

<Link id="0x3_iota_system_active_validator_addresses"></Link>

## Function `active_validator_addresses`

Getter returning addresses of the currently active validators.


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_active_validator_addresses">active_validator_addresses</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>): <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;<b>address</b>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_active_validator_addresses">active_validator_addresses</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>): <Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;<b>address</b>&gt; \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state">load_system_state</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_active_validator_addresses">active_validator_addresses</Link>()
}
</code></pre>



</details>

<Link id="0x3_iota_system_advance_epoch"></Link>

## Function `advance_epoch`

This function should be called at the end of an epoch, and advances the system to the next epoch.
It does the following things:
1. Add storage charge to the storage fund.
2. Burn the storage rebates from the storage fund. These are already refunded to transaction sender's
gas coins.
3. Mint or burn IOTA tokens depending on whether the validator target reward is greater
or smaller than the computation reward.
4. Distribute the target reward to the validators.
5. Burn any leftover rewards.
6. Update all validators.


<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_advance_epoch">advance_epoch</Link>(validator_target_reward: u64, storage_charge: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, computation_reward: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;, wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>, new_epoch: u64, next_protocol_version: u64, storage_rebate: u64, non_refundable_storage_fee: u64, reward_slashing_rate: u64, epoch_start_timestamp_ms: u64, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;<Link to="../iota-framework/iota#0x2_iota_IOTA">iota::IOTA</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_advance_epoch">advance_epoch</Link>(
    validator_target_reward: u64,
    storage_charge: Balance&lt;IOTA&gt;,
    computation_reward: Balance&lt;IOTA&gt;,
    wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>,
    new_epoch: u64,
    next_protocol_version: u64,
    storage_rebate: u64,
    non_refundable_storage_fee: u64,
    reward_slashing_rate: u64, // how much rewards are slashed <b>to</b> punish a <Link to="validator#0x3_validator">validator</Link>, in bps.
    epoch_start_timestamp_ms: u64, // Timestamp of the epoch start
    ctx: &<b>mut</b> TxContext,
) : Balance&lt;IOTA&gt; \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(wrapper);
    // Validator will make a special system call <b>with</b> sender set <b>as</b> 0x0.
    <b>assert</b>!(ctx.sender() == @0x0, <Link to="iota_system#0x3_iota_system_ENotSystemAddress">ENotSystemAddress</Link>);
    <b>let</b> storage_rebate = self.<Link to="iota_system#0x3_iota_system_advance_epoch">advance_epoch</Link>(
        new_epoch,
        next_protocol_version,
        validator_target_reward,
        storage_charge,
        computation_reward,
        storage_rebate,
        non_refundable_storage_fee,
        reward_slashing_rate,
        epoch_start_timestamp_ms,
        ctx,
    );

    storage_rebate
}
</code></pre>



</details>

<Link id="0x3_iota_system_load_system_state"></Link>

## Function `load_system_state`



<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_load_system_state">load_system_state</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>): &<Link to="iota_system_state_inner#0x3_iota_system_state_inner_IotaSystemStateInnerV2">iota_system_state_inner::IotaSystemStateInnerV2</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_load_system_state">load_system_state</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>): &IotaSystemStateInnerV2 \{
    <Link to="iota_system#0x3_iota_system_load_inner_maybe_upgrade">load_inner_maybe_upgrade</Link>(self)
}
</code></pre>



</details>

<Link id="0x3_iota_system_load_system_state_mut"></Link>

## Function `load_system_state_mut`



<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>): &<b>mut</b> <Link to="iota_system_state_inner#0x3_iota_system_state_inner_IotaSystemStateInnerV2">iota_system_state_inner::IotaSystemStateInnerV2</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_load_system_state_mut">load_system_state_mut</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>): &<b>mut</b> IotaSystemStateInnerV2 \{
    <Link to="iota_system#0x3_iota_system_load_inner_maybe_upgrade">load_inner_maybe_upgrade</Link>(self)
}
</code></pre>



</details>

<Link id="0x3_iota_system_load_inner_maybe_upgrade"></Link>

## Function `load_inner_maybe_upgrade`



<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_load_inner_maybe_upgrade">load_inner_maybe_upgrade</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>): &<b>mut</b> <Link to="iota_system_state_inner#0x3_iota_system_state_inner_IotaSystemStateInnerV2">iota_system_state_inner::IotaSystemStateInnerV2</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>fun</b> <Link to="iota_system#0x3_iota_system_load_inner_maybe_upgrade">load_inner_maybe_upgrade</Link>(self: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>): &<b>mut</b> IotaSystemStateInnerV2 \{
    <b>if</b> (self.version == 1) \{
      <b>let</b> v1: IotaSystemStateInner = <Link to="../iota-framework/dynamic_field#0x2_dynamic_field_remove">dynamic_field::remove</Link>(&<b>mut</b> self.id, self.version);
      <b>let</b> v2 = v1.v1_to_v2();
      self.version = 2;
      <Link to="../iota-framework/dynamic_field#0x2_dynamic_field_add">dynamic_field::add</Link>(&<b>mut</b> self.id, self.version, v2);
    };

    <b>let</b> inner: &<b>mut</b> IotaSystemStateInnerV2 = <Link to="../iota-framework/dynamic_field#0x2_dynamic_field_borrow_mut">dynamic_field::borrow_mut</Link>(
        &<b>mut</b> self.id,
        self.version
    );
    <b>assert</b>!(inner.system_state_version() == self.version, <Link to="iota_system#0x3_iota_system_EWrongInnerVersion">EWrongInnerVersion</Link>);
    inner
}
</code></pre>



</details>

<Link id="0x3_iota_system_load_system_timelock_cap"></Link>

## Function `load_system_timelock_cap`



<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="iota_system#0x3_iota_system_load_system_timelock_cap">load_system_timelock_cap</Link>(self: &<Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>): &<Link to="../iota-framework/timelock#0x2_timelock_SystemTimelockCap">timelock::SystemTimelockCap</Link>
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(package) <b>fun</b> <Link to="iota_system#0x3_iota_system_load_system_timelock_cap">load_system_timelock_cap</Link>(self: &<Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>): &SystemTimelockCap \{
    <Link to="../iota-framework/dynamic_field#0x2_dynamic_field_borrow">dynamic_field::borrow</Link>(
        &self.id,
        <Link to="iota_system#0x3_iota_system_SYSTEM_TIMELOCK_CAP_DF_KEY">SYSTEM_TIMELOCK_CAP_DF_KEY</Link>
    )
}
</code></pre>



</details>

<Link id="0x3_iota_system_get_total_iota_supply"></Link>

## Function `get_total_iota_supply`

Returns the total iota supply.


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_get_total_iota_supply">get_total_iota_supply</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">iota_system::IotaSystemState</Link>): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="iota_system#0x3_iota_system_get_total_iota_supply">get_total_iota_supply</Link>(wrapper: &<b>mut</b> <Link to="iota_system#0x3_iota_system_IotaSystemState">IotaSystemState</Link>): u64 \{
    <b>let</b> self = <Link to="iota_system#0x3_iota_system_load_system_state">load_system_state</Link>(wrapper);
    self.<Link to="iota_system#0x3_iota_system_get_total_iota_supply">get_total_iota_supply</Link>()
}
</code></pre>



</details>
