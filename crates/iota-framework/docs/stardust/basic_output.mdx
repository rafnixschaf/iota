---
title: Module `0x107a::basic_output`
---
import Link from '@docusaurus/Link';

<Link id="0x107a_basic_output"/>


-  [Resource `BasicOutput`](#0x107a_basic_output_BasicOutput)
-  [Function `extract_assets`](#0x107a_basic_output_extract_assets)
-  [Function `receive`](#0x107a_basic_output_receive)


<pre><code>
<b>use</b> <Link to="expiration_unlock_condition#0x107a_expiration_unlock_condition">0x107a::expiration_unlock_condition</Link>;
<b>use</b> <Link to="storage_deposit_return_unlock_condition#0x107a_storage_deposit_return_unlock_condition">0x107a::storage_deposit_return_unlock_condition</Link>;
<b>use</b> <Link to="timelock_unlock_condition#0x107a_timelock_unlock_condition">0x107a::timelock_unlock_condition</Link>;
<b>use</b> <Link to="../move-stdlib/option#0x1_option">0x1::option</Link>;
<b>use</b> <Link to="../iota-framework/bag#0x2_bag">0x2::bag</Link>;
<b>use</b> <Link to="../iota-framework/balance#0x2_balance">0x2::balance</Link>;
<b>use</b> <Link to="../iota-framework/object#0x2_object">0x2::object</Link>;
<b>use</b> <Link to="../iota-framework/transfer#0x2_transfer">0x2::transfer</Link>;
<b>use</b> <Link to="../iota-framework/tx_context#0x2_tx_context">0x2::tx_context</Link>;
</code></pre>



<Link id="0x107a_basic_output_BasicOutput"></Link>

## Resource `BasicOutput`

A basic output that has unlock conditions/features.
- basic outputs with expiration unlock condition must be a shared object, since that's the only
way to handle the two possible addresses that can unlock the output.
- notice that there is no <code>
store</code> ability and there is no custom transfer function:
-  you can call <code>
extract_assets</code>,
-  or you can call <code>
receive</code> in other models to receive a <code>
<Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link></code>.


<pre><code>
<b>struct</b> <Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link>&lt;T&gt; <b>has</b> key
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
id: <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link></code>
</dt>
<dd>
 Hash of the <code>
outputId</code> that was migrated.
</dd>
<dt>
<code>
<Link to="../iota-framework/balance#0x2_balance">balance</Link>: <Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;</code>
</dt>
<dd>
 The amount of coins held by the output.
</dd>
<dt>
<code>
native_tokens: <Link to="../iota-framework/bag#0x2_bag_Bag">bag::Bag</Link></code>
</dt>
<dd>
 The <code>
Bag</code> holds native tokens, key-ed by the stringified type of the asset.
 Example: key: "0xabcded::soon::SOON", value: `Balance<0xabcded::soon::SOON>`.
</dd>
<dt>
<code>
storage_deposit_return_uc: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="storage_deposit_return_unlock_condition#0x107a_storage_deposit_return_unlock_condition_StorageDepositReturnUnlockCondition">storage_deposit_return_unlock_condition::StorageDepositReturnUnlockCondition</Link>&gt;</code>
</dt>
<dd>
 The storage deposit return unlock condition.
</dd>
<dt>
<code>
timelock_uc: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="timelock_unlock_condition#0x107a_timelock_unlock_condition_TimelockUnlockCondition">timelock_unlock_condition::TimelockUnlockCondition</Link>&gt;</code>
</dt>
<dd>
 The timelock unlock condition.
</dd>
<dt>
<code>
expiration_uc: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="expiration_unlock_condition#0x107a_expiration_unlock_condition_ExpirationUnlockCondition">expiration_unlock_condition::ExpirationUnlockCondition</Link>&gt;</code>
</dt>
<dd>
 The expiration unlock condition.
</dd>
<dt>
<code>
metadata: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;</code>
</dt>
<dd>
 The metadata feature.
</dd>
<dt>
<code>
tag: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../move-stdlib/vector#0x1_vector">vector</Link>&lt;u8&gt;&gt;</code>
</dt>
<dd>
 The tag feature.
</dd>
<dt>
<code>
sender: <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<b>address</b>&gt;</code>
</dt>
<dd>
 The sender feature.
</dd>
</dl>


</details>

<Link id="0x107a_basic_output_extract_assets"></Link>

## Function `extract_assets`

Extract the assets stored inside the output, respecting the unlock conditions.
- The object will be deleted.
- The <code>
StorageDepositReturnUnlockCondition</code> will return the deposit.
- Remaining assets (coins and native tokens) will be returned.


<pre><code>
<b>public</b> <b>fun</b> <Link to="basic_output#0x107a_basic_output_extract_assets">extract_assets</Link>&lt;T&gt;(output: <Link to="basic_output#0x107a_basic_output_BasicOutput">basic_output::BasicOutput</Link>&lt;T&gt;, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): (<Link to="../iota-framework/balance#0x2_balance_Balance">balance::Balance</Link>&lt;T&gt;, <Link to="../iota-framework/bag#0x2_bag_Bag">bag::Bag</Link>)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="basic_output#0x107a_basic_output_extract_assets">extract_assets</Link>&lt;T&gt;(output: <Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link>&lt;T&gt;, ctx: &<b>mut</b> TxContext) : (Balance&lt;T&gt;, Bag) \{
    // Unpack the output into its basic part.
    <b>let</b> <Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link> \{
        id,
        <Link to="../iota-framework/balance#0x2_balance">balance</Link>: <b>mut</b> <Link to="../iota-framework/balance#0x2_balance">balance</Link>,
        native_tokens,
        storage_deposit_return_uc: <b>mut</b> storage_deposit_return_uc,
        timelock_uc: <b>mut</b> timelock_uc,
        expiration_uc: <b>mut</b> expiration_uc,
        sender: _,
        metadata: _,
        tag: _
    } = output;

    // If the output <b>has</b> a timelock unlock condition, then we need <b>to</b> check <b>if</b> the timelock_uc <b>has</b> expired.
    <b>if</b> (timelock_uc.is_some()) \{
        timelock_uc.extract().unlock(ctx);
    };

    // If the output <b>has</b> an expiration unlock condition, then we need <b>to</b> check who can unlock the output.
    <b>if</b> (expiration_uc.is_some()) \{
        expiration_uc.extract().unlock(ctx);
    };

    // If the output <b>has</b> an storage deposit <b>return</b> unlock condition, then we need <b>to</b> <b>return</b> the deposit.
    <b>if</b> (storage_deposit_return_uc.is_some()) \{
        storage_deposit_return_uc.extract().unlock(&<b>mut</b> <Link to="../iota-framework/balance#0x2_balance">balance</Link>, ctx);
    };

    // Destroy the unlock conditions.
    <Link to="../move-stdlib/option#0x1_option_destroy_none">option::destroy_none</Link>(timelock_uc);
    <Link to="../move-stdlib/option#0x1_option_destroy_none">option::destroy_none</Link>(expiration_uc);
    <Link to="../move-stdlib/option#0x1_option_destroy_none">option::destroy_none</Link>(storage_deposit_return_uc);

    // Delete the output.
    <Link to="../iota-framework/object#0x2_object_delete">object::delete</Link>(id);

    <b>return</b> (<Link to="../iota-framework/balance#0x2_balance">balance</Link>, native_tokens)
}
</code></pre>



</details>

<Link id="0x107a_basic_output_receive"></Link>

## Function `receive`

Utility function to receive a basic output in other stardust modules.
Since <code>
<Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link></code> only has <code>
key</code>, it can not be received via <code>
public_receive</code>.
The private receiver must be implemented in its defining module (here).
Other modules in the Stardust package can call this function to receive a basic output (alias, NFT).


<pre><code>
<b>public</b>(<b>friend</b>) <b>fun</b> <Link to="basic_output#0x107a_basic_output_receive">receive</Link>&lt;T&gt;(parent: &<b>mut</b> <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, output: <Link to="../iota-framework/transfer#0x2_transfer_Receiving">transfer::Receiving</Link>&lt;<Link to="basic_output#0x107a_basic_output_BasicOutput">basic_output::BasicOutput</Link>&lt;T&gt;&gt;): <Link to="basic_output#0x107a_basic_output_BasicOutput">basic_output::BasicOutput</Link>&lt;T&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b>(<Link to="../iota-framework/package#0x2_package">package</Link>) <b>fun</b> <Link to="basic_output#0x107a_basic_output_receive">receive</Link>&lt;T&gt;(parent: &<b>mut</b> UID, output: Receiving&lt;<Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link>&lt;T&gt;&gt;) : <Link to="basic_output#0x107a_basic_output_BasicOutput">BasicOutput</Link>&lt;T&gt; \{
    <Link to="../iota-framework/transfer#0x2_transfer_receive">transfer::receive</Link>(parent, output)
}
</code></pre>



</details>
