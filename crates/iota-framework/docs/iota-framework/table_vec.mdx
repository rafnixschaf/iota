---
title: Module `0x2::table_vec`
---
import Link from '@docusaurus/Link';

<Link id="0x2_table_vec"/>
A basic scalable vector library implemented using <code>
Table</code>.


-  [Struct `TableVec`](#0x2_table_vec_TableVec)
-  [Constants](#@Constants_0)
-  [Function `empty`](#0x2_table_vec_empty)
-  [Function `singleton`](#0x2_table_vec_singleton)
-  [Function `length`](#0x2_table_vec_length)
-  [Function `is_empty`](#0x2_table_vec_is_empty)
-  [Function `borrow`](#0x2_table_vec_borrow)
-  [Function `push_back`](#0x2_table_vec_push_back)
-  [Function `borrow_mut`](#0x2_table_vec_borrow_mut)
-  [Function `pop_back`](#0x2_table_vec_pop_back)
-  [Function `destroy_empty`](#0x2_table_vec_destroy_empty)
-  [Function `drop`](#0x2_table_vec_drop)
-  [Function `swap`](#0x2_table_vec_swap)
-  [Function `swap_remove`](#0x2_table_vec_swap_remove)


<pre><code>
<b>use</b> <Link to="../iota-framework/table#0x2_table">0x2::table</Link>;
<b>use</b> <Link to="../iota-framework/tx_context#0x2_tx_context">0x2::tx_context</Link>;
</code></pre>



<Link id="0x2_table_vec_TableVec"></Link>

## Struct `TableVec`



<pre><code>
<b>struct</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element: store&gt; <b>has</b> store
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
contents: <Link to="../iota-framework/table#0x2_table_Table">table::Table</Link>&lt;u64, Element&gt;</code>
</dt>
<dd>
 The contents of the table vector.
</dd>
</dl>


</details>

<Link id="@Constants_0"></Link>

## Constants


<Link id="0x2_table_vec_EIndexOutOfBound"></Link>



<pre><code>
<b>const</b> <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>: u64 = 0;
</code></pre>



<Link id="0x2_table_vec_ETableNonEmpty"></Link>



<pre><code>
<b>const</b> <Link to="../iota-framework/table_vec#0x2_table_vec_ETableNonEmpty">ETableNonEmpty</Link>: u64 = 1;
</code></pre>



<Link id="0x2_table_vec_empty"></Link>

## Function `empty`

Create an empty TableVec.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_empty">empty</Link>&lt;Element: store&gt;(ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_empty">empty</Link>&lt;Element: store&gt;(ctx: &<b>mut</b> TxContext): <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt; \{
    <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link> \{
        contents: <Link to="../iota-framework/table#0x2_table_new">table::new</Link>(ctx)
    }
}
</code></pre>



</details>

<Link id="0x2_table_vec_singleton"></Link>

## Function `singleton`

Return a TableVec of size one containing element <code>
e</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_singleton">singleton</Link>&lt;Element: store&gt;(e: Element, ctx: &<b>mut</b> <Link to="../iota-framework/tx_context#0x2_tx_context_TxContext">tx_context::TxContext</Link>): <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_singleton">singleton</Link>&lt;Element: store&gt;(e: Element, ctx: &<b>mut</b> TxContext): <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt; \{
    <b>let</b> <b>mut</b> t = <Link to="../iota-framework/table_vec#0x2_table_vec_empty">empty</Link>(ctx);
    t.<Link to="../iota-framework/table_vec#0x2_table_vec_push_back">push_back</Link>(e);
    t
}
</code></pre>



</details>

<Link id="0x2_table_vec_length"></Link>

## Function `length`

Return the length of the TableVec.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>&lt;Element: store&gt;(t: &<Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;): u64
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>&lt;Element: store&gt;(t: &<Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;): u64 \{
    t.contents.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>()
}
</code></pre>



</details>

<Link id="0x2_table_vec_is_empty"></Link>

## Function `is_empty`

Return if the TableVec is empty or not.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_is_empty">is_empty</Link>&lt;Element: store&gt;(t: &<Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_is_empty">is_empty</Link>&lt;Element: store&gt;(t: &<Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;): bool \{
    t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() == 0
}
</code></pre>



</details>

<Link id="0x2_table_vec_borrow"></Link>

## Function `borrow`

Acquire an immutable reference to the <code>
i</code>th element of the TableVec <code>
t</code>.
Aborts if <code>
i</code> is out of bounds.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_borrow">borrow</Link>&lt;Element: store&gt;(t: &<Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;, i: u64): &Element
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_borrow">borrow</Link>&lt;Element: store&gt;(t: &<Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;, i: u64): &Element \{
    <b>assert</b>!(t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() &gt; i, <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>);
    &t.contents[i]
}
</code></pre>



</details>

<Link id="0x2_table_vec_push_back"></Link>

## Function `push_back`

Add element <code>
e</code> to the end of the TableVec <code>
t</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_push_back">push_back</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;, e: Element)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_push_back">push_back</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;, e: Element) \{
    <b>let</b> key = t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>();
    t.contents.add(key, e);
}
</code></pre>



</details>

<Link id="0x2_table_vec_borrow_mut"></Link>

## Function `borrow_mut`

Return a mutable reference to the <code>
i</code>th element in the TableVec <code>
t</code>.
Aborts if <code>
i</code> is out of bounds.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_borrow_mut">borrow_mut</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;, i: u64): &<b>mut</b> Element
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_borrow_mut">borrow_mut</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;, i: u64): &<b>mut</b> Element \{
    <b>assert</b>!(t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() &gt; i, <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>);
    &<b>mut</b> t.contents[i]
}
</code></pre>



</details>

<Link id="0x2_table_vec_pop_back"></Link>

## Function `pop_back`

Pop an element from the end of TableVec <code>
t</code>.
Aborts if <code>
t</code> is empty.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_pop_back">pop_back</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;): Element
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_pop_back">pop_back</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;): Element \{
    <b>let</b> length = <Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>(t);
    <b>assert</b>!(length &gt; 0, <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>);
    t.contents.remove(length - 1)
}
</code></pre>



</details>

<Link id="0x2_table_vec_destroy_empty"></Link>

## Function `destroy_empty`

Destroy the TableVec <code>
t</code>.
Aborts if <code>
t</code> is not empty.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_destroy_empty">destroy_empty</Link>&lt;Element: store&gt;(t: <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_destroy_empty">destroy_empty</Link>&lt;Element: store&gt;(t: <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;) \{
    <b>assert</b>!(<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>(&t) == 0, <Link to="../iota-framework/table_vec#0x2_table_vec_ETableNonEmpty">ETableNonEmpty</Link>);
    <b>let</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link> \{ contents } = t;
    contents.<Link to="../iota-framework/table_vec#0x2_table_vec_destroy_empty">destroy_empty</Link>();
}
</code></pre>



</details>

<Link id="0x2_table_vec_drop"></Link>

## Function `drop`

Drop a possibly non-empty TableVec <code>
t</code>.
Usable only if the value type <code>
Element</code> has the <code>
drop</code> ability


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_drop">drop</Link>&lt;Element: drop, store&gt;(t: <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_drop">drop</Link>&lt;Element: drop + store&gt;(t: <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;) \{
    <b>let</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link> \{ contents } = t;
    contents.<Link to="../iota-framework/table_vec#0x2_table_vec_drop">drop</Link>()
}
</code></pre>



</details>

<Link id="0x2_table_vec_swap"></Link>

## Function `swap`

Swaps the elements at the <code>
i</code>th and <code>
j</code>th indices in the TableVec <code>
t</code>.
Aborts if <code>
i</code> or <code>
j</code> is out of bounds.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_swap">swap</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;, i: u64, j: u64)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_swap">swap</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;, i: u64, j: u64) \{
    <b>assert</b>!(t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() &gt; i, <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>);
    <b>assert</b>!(t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() &gt; j, <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>);
    <b>if</b> (i == j) \{ <b>return</b> };
    <b>let</b> element_i = t.contents.remove(i);
    <b>let</b> element_j = t.contents.remove(j);
    t.contents.add(j, element_i);
    t.contents.add(i, element_j);
}
</code></pre>



</details>

<Link id="0x2_table_vec_swap_remove"></Link>

## Function `swap_remove`

Swap the <code>
i</code>th element of the TableVec <code>
t</code> with the last element and then pop the TableVec.
This is O(1), but does not preserve ordering of elements in the TableVec.
Aborts if <code>
i</code> is out of bounds.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_swap_remove">swap_remove</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">table_vec::TableVec</Link>&lt;Element&gt;, i: u64): Element
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/table_vec#0x2_table_vec_swap_remove">swap_remove</Link>&lt;Element: store&gt;(t: &<b>mut</b> <Link to="../iota-framework/table_vec#0x2_table_vec_TableVec">TableVec</Link>&lt;Element&gt;, i: u64): Element \{
    <b>assert</b>!(t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() &gt; i, <Link to="../iota-framework/table_vec#0x2_table_vec_EIndexOutOfBound">EIndexOutOfBound</Link>);
    <b>let</b> last_idx = t.<Link to="../iota-framework/table_vec#0x2_table_vec_length">length</Link>() - 1;
    t.<Link to="../iota-framework/table_vec#0x2_table_vec_swap">swap</Link>(i, last_idx);
    t.<Link to="../iota-framework/table_vec#0x2_table_vec_pop_back">pop_back</Link>()
}
</code></pre>



</details>
