---
title: Module `0x2::dynamic_object_field`
---
import Link from '@docusaurus/Link';

<Link id="0x2_dynamic_object_field"/>
Similar to <code>
iota::dynamic_field</code>, this module allows for the access of dynamic fields. But
unlike, <code>
iota::dynamic_field</code> the values bound to these dynamic fields _must_ be objects
themselves. This allows for the objects to still exist within in storage, which may be important
for external tools. The difference is otherwise not observable from within Move.


-  [Struct `Wrapper`](#0x2_dynamic_object_field_Wrapper)
-  [Function `add`](#0x2_dynamic_object_field_add)
-  [Function `borrow`](#0x2_dynamic_object_field_borrow)
-  [Function `borrow_mut`](#0x2_dynamic_object_field_borrow_mut)
-  [Function `remove`](#0x2_dynamic_object_field_remove)
-  [Function `exists_`](#0x2_dynamic_object_field_exists_)
-  [Function `exists_with_type`](#0x2_dynamic_object_field_exists_with_type)
-  [Function `id`](#0x2_dynamic_object_field_id)


<pre><code>
<b>use</b> <Link to="../move-stdlib/option#0x1_option">0x1::option</Link>;
<b>use</b> <Link to="../iota-framework/dynamic_field#0x2_dynamic_field">0x2::dynamic_field</Link>;
<b>use</b> <Link to="../iota-framework/object#0x2_object">0x2::object</Link>;
</code></pre>



<Link id="0x2_dynamic_object_field_Wrapper"></Link>

## Struct `Wrapper`



<pre><code>
<b>struct</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt; <b>has</b> <b>copy</b>, drop, store
</code></pre>



<details>
<summary>Fields</summary>


<dl>
<dt>
<code>
name: Name</code>
</dt>
<dd>

</dd>
</dl>


</details>

<Link id="0x2_dynamic_object_field_add"></Link>

## Function `add`

Adds a dynamic object field to the object <code>
<Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> UID</code> at field specified by <code>
name: Name</code>.
Aborts with <code>
EFieldAlreadyExists</code> if the object already has that field with that name.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_add">add</Link>&lt;Name: <b>copy</b>, drop, store, Value: store, key&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name, value: Value)
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_add">add</Link>&lt;Name: <b>copy</b> + drop + store, Value: key + store&gt;(
    // we <b>use</b> &<b>mut</b> UID in several spots for access control
    <Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> UID,
    name: Name,
    value: Value,
) \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    <b>let</b> id = <Link to="../iota-framework/object#0x2_object_id">object::id</Link>(&value);
    field::add(<Link to="../iota-framework/object#0x2_object">object</Link>, key, id);
    <b>let</b> (field, _) = field::field_info&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    add_child_object(field.to_address(), value);
}
</code></pre>



</details>

<Link id="0x2_dynamic_object_field_borrow"></Link>

## Function `borrow`

Immutably borrows the <code>
<Link to="../iota-framework/object#0x2_object">object</Link></code>s dynamic object field with the name specified by <code>
name: Name</code>.
Aborts with <code>
EFieldDoesNotExist</code> if the object does not have a field with that name.
Aborts with <code>
EFieldTypeMismatch</code> if the field exists, but the value object does not have the
specified type.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_borrow">borrow</Link>&lt;Name: <b>copy</b>, drop, store, Value: store, key&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name): &Value
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_borrow">borrow</Link>&lt;Name: <b>copy</b> + drop + store, Value: key + store&gt;(
    <Link to="../iota-framework/object#0x2_object">object</Link>: &UID,
    name: Name,
): &Value \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    <b>let</b> (field, value_id) = field::field_info&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    borrow_child_object&lt;Value&gt;(field, value_id)
}
</code></pre>



</details>

<Link id="0x2_dynamic_object_field_borrow_mut"></Link>

## Function `borrow_mut`

Mutably borrows the <code>
<Link to="../iota-framework/object#0x2_object">object</Link></code>s dynamic object field with the name specified by <code>
name: Name</code>.
Aborts with <code>
EFieldDoesNotExist</code> if the object does not have a field with that name.
Aborts with <code>
EFieldTypeMismatch</code> if the field exists, but the value object does not have the
specified type.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_borrow_mut">borrow_mut</Link>&lt;Name: <b>copy</b>, drop, store, Value: store, key&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name): &<b>mut</b> Value
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_borrow_mut">borrow_mut</Link>&lt;Name: <b>copy</b> + drop + store, Value: key + store&gt;(
    <Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> UID,
    name: Name,
): &<b>mut</b> Value \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    <b>let</b> (field, value_id) = field::field_info_mut&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    borrow_child_object_mut&lt;Value&gt;(field, value_id)
}
</code></pre>



</details>

<Link id="0x2_dynamic_object_field_remove"></Link>

## Function `remove`

Removes the <code>
<Link to="../iota-framework/object#0x2_object">object</Link></code>s dynamic object field with the name specified by <code>
name: Name</code> and returns
the bound object.
Aborts with <code>
EFieldDoesNotExist</code> if the object does not have a field with that name.
Aborts with <code>
EFieldTypeMismatch</code> if the field exists, but the value object does not have the
specified type.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_remove">remove</Link>&lt;Name: <b>copy</b>, drop, store, Value: store, key&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> <Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name): Value
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_remove">remove</Link>&lt;Name: <b>copy</b> + drop + store, Value: key + store&gt;(
    <Link to="../iota-framework/object#0x2_object">object</Link>: &<b>mut</b> UID,
    name: Name,
): Value \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    <b>let</b> (field, value_id) = field::field_info&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    <b>let</b> value = remove_child_object&lt;Value&gt;(field.to_address(), value_id);
    field::remove&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;, ID&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    value
}
</code></pre>



</details>

<Link id="0x2_dynamic_object_field_exists_"></Link>

## Function `exists_`

Returns true if and only if the <code>
<Link to="../iota-framework/object#0x2_object">object</Link></code> has a dynamic object field with the name specified by
<code>
name: Name</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_exists_">exists_</Link>&lt;Name: <b>copy</b>, drop, store&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_exists_">exists_</Link>&lt;Name: <b>copy</b> + drop + store&gt;(
    <Link to="../iota-framework/object#0x2_object">object</Link>: &UID,
    name: Name,
): bool \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    field::exists_with_type&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;, ID&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key)
}
</code></pre>



</details>

<Link id="0x2_dynamic_object_field_exists_with_type"></Link>

## Function `exists_with_type`

Returns true if and only if the <code>
<Link to="../iota-framework/object#0x2_object">object</Link></code> has a dynamic field with the name specified by
<code>
name: Name</code> with an assigned value of type <code>
Value</code>.


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_exists_with_type">exists_with_type</Link>&lt;Name: <b>copy</b>, drop, store, Value: store, key&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name): bool
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_exists_with_type">exists_with_type</Link>&lt;Name: <b>copy</b> + drop + store, Value: key + store&gt;(
    <Link to="../iota-framework/object#0x2_object">object</Link>: &UID,
    name: Name,
): bool \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    <b>if</b> (!field::exists_with_type&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;, ID&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key)) <b>return</b> <b>false</b>;
    <b>let</b> (field, value_id) = field::field_info&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    field::has_child_object_with_ty&lt;Value&gt;(field.to_address(), value_id)
}
</code></pre>



</details>

<Link id="0x2_dynamic_object_field_id"></Link>

## Function `id`

Returns the ID of the object associated with the dynamic object field
Returns none otherwise


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_id">id</Link>&lt;Name: <b>copy</b>, drop, store&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>: &<Link to="../iota-framework/object#0x2_object_UID">object::UID</Link>, name: Name): <Link to="../move-stdlib/option#0x1_option_Option">option::Option</Link>&lt;<Link to="../iota-framework/object#0x2_object_ID">object::ID</Link>&gt;
</code></pre>



<details>
<summary>Implementation</summary>


<pre><code>
<b>public</b> <b>fun</b> <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_id">id</Link>&lt;Name: <b>copy</b> + drop + store&gt;(
    <Link to="../iota-framework/object#0x2_object">object</Link>: &UID,
    name: Name,
): Option&lt;ID&gt; \{
    <b>let</b> key = <Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link> \{ name };
    <b>if</b> (!field::exists_with_type&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;, ID&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key)) <b>return</b> <Link to="../move-stdlib/option#0x1_option_none">option::none</Link>();
    <b>let</b> (_field, value_addr) = field::field_info&lt;<Link to="../iota-framework/dynamic_object_field#0x2_dynamic_object_field_Wrapper">Wrapper</Link>&lt;Name&gt;&gt;(<Link to="../iota-framework/object#0x2_object">object</Link>, key);
    <Link to="../move-stdlib/option#0x1_option_some">option::some</Link>(value_addr.to_id())
}
</code></pre>



</details>
